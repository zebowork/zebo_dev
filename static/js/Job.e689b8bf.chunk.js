(this.webpackJsonpzebo_fe=this.webpackJsonpzebo_fe||[]).push([[13],{654:function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return f}));var n=a(48),r=a.n(n),l=a(90),c=a(65),i=a(15),s=a(61),o=a(258);function m(){return u.apply(this,arguments)}function u(){return(u=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(s.m)(),e.next=3,Object(c.getApiResponseFromDb)(i.f);case 3:if(!(a=e.sent)){e.next=7;break}return Object(o.a)(t),e.abrupt("return",a.response);case 7:return e.abrupt("return",Object(o.a)(t));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(r.a.mark((function e(t){var a,n,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(i.j)(t),n=Object(s.o)(t),e.next=4,Object(c.getApiResponseFromDb)(a);case 4:if(!(l=e.sent)){e.next=8;break}return Object(o.c)(t,n),e.abrupt("return",Promise.resolve({db:l.response,api:n}));case 8:return e.abrupt("return",Promise.resolve({db:void 0,api:Object(o.c)(t,n)}));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return p.apply(this,arguments)}function p(){return(p=Object(l.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(s.n)(0,0),e.next=3,Object(c.getApiResponseFromDb)(i.h);case 3:if(!(a=e.sent)){e.next=7;break}return Object(o.b)(t),e.abrupt("return",Promise.resolve({db:a.response,api:t}));case 7:return e.abrupt("return",Promise.resolve({db:[],api:Object(o.b)(t)}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},659:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"b",(function(){return i}));var n=a(8),r=function(){return{type:n.e.CANCEL_JOB}},l=function(e){return{type:n.e.LAUNDRY_PRICE_DETAIL,laundryId:e}},c=function(){return{type:n.e.PRICE_DETAIL}},i=function(e){return{type:n.e.DISPLAY_POST_JOB,selectedLaundryId:e}}},670:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return s}));var n=a(249),r=a(61),l=a(45),c=a.n(l);function i(e){return function(t,a){t(m(e)),c.a.info("Removed favorite laundry"),a().loginState.authenticated&&Object(r.t)(e).catch((function(a){c.a.warn("Failed to removed favorite laundry try again"),t(o(e))}))}}function s(e){return function(t,a){t(o(e)),c.a.info("Added to your favorite laundries"),a().loginState.authenticated&&Object(r.d)(e).catch((function(a){c.a.warn("Failed to add favorite laundry try again"),t(m(e))}))}}var o=function(e){return{type:n.a.FVT_LAUNDRY_ADD,laundryId:e}},m=function(e){return{type:n.a.FVT_LAUNDRY_REMOVE,laundryId:e}}},699:function(e,t,a){},811:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(60),c=a(341),i=a(85),s=a(91),o=a(117),m=a(138),u=a(150),d=a.n(u),b=a(354),f=a.n(b),p=a(45),E=a.n(p),h=a(62),v=a(58),g=a(164),y=function(e){var t=e.items,a=e.deleteItem,n=e.editItem;return r.a.createElement("div",null," ",r.a.createElement("div",null,t.map((function(e){return r.a.createElement("span",{key:e.basketFeId},r.a.createElement("div",{className:"card p-0 mb-2 border-top-0 border-right-0 border-left-0"},r.a.createElement("div",{className:"d-flex flex-row  justify-content-between rounded bg-white"},r.a.createElement("div",{className:"d-flex align-items-start flex-column  bg-white"},r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("div",{className:"p-1 "},r.a.createElement("button",{type:"button",className:"close text-danger float-left","aria-label":"Close","data-original-title":"Delete item",onClick:function(t){return a(e.basketFeId)}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"p-1 font-weight-bold pull-left"},r.a.createElement("span",{className:"wr"}," ",Object(h.text_truncate)(e.name,19))," ",Object(v.exist)(e.operations,g.a)&&r.a.createElement("i",{className:"icofont-hanger icofont-md","aria-hidden":"true"})),r.a.createElement("div",{className:"pt-2  pull-right",style:{fontSize:"10px",textAlign:"right"}},Object(h.constantToStringUpperCaseFirstLetter)(e.febric))),r.a.createElement("div",{className:"d-flex"},r.a.createElement("div",{className:"p-1 "},r.a.createElement("button",{type:"button",className:"border border-0 bg-transparent p-0","aria-hidden":"true",style:{color:"#3386ff",outline:"none"},"data-testid":"edit-btn",onClick:function(t){return n(e)}},r.a.createElement("i",{className:"icofont-edit","aria-hidden":"true"}))),r.a.createElement("div",{className:"p-1 ",style:{fontSize:"12px"}},Object(v.removeAllMatched)(e.operations,g.a).map((function(e){return Object(h.constantToStringUpperCaseFirstLetter)(e)})).join(", ")),r.a.createElement("div",{className:"p-1",style:{fontSize:"12px"}},"- ",e.imageUrls.length," ",r.a.createElement("i",{className:"icofont-ui-camera","aria-hidden":"true"})))),r.a.createElement("div",{className:"d-flex align-items-end flex-column bg-white align-self-center"},r.a.createElement("div",{className:"align-self-center align-self-stretch"},r.a.createElement("span",{className:"circleNum"},Object(h.twoDigitNumber)(e.count)))))))}))))},k=function(e){var t=e.items,a=e.deleteItem,n=e.editItem;return r.a.createElement("div",{className:"table-responsive table-full-width"},r.a.createElement("table",{className:"table table-hover table-striped"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Count"),r.a.createElement("th",null,"Ops."),r.a.createElement("th",null,"Febric"),r.a.createElement("th",null))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.basketFeId},r.a.createElement("td",null,r.a.createElement("button",{type:"button",className:"close text-danger float-left pr-1","aria-label":"Close","data-original-title":"Delete item",onClick:function(t){return a(e.basketFeId)}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7")),r.a.createElement("button",{type:"button",className:"border border-0 p-0 bg-transparent noOutline","aria-hidden":"true",style:{color:"#3386ff"},"data-testid":"edit-btn",onClick:function(t){return n(e)}},r.a.createElement("i",{className:"icofont-edit","aria-hidden":"true"}))),r.a.createElement("td",null,e.name," ",Object(v.exist)(e.operations,g.a)&&r.a.createElement("i",{className:"icofont-hanger icofont-md","aria-hidden":"true"})),r.a.createElement("td",null,e.count),r.a.createElement("td",null,Object(v.removeAllMatched)(e.operations,g.a).map((function(e){return Object(h.constantToStringUpperCaseFirstLetter)(e)})).join(", ")),r.a.createElement("td",null,Object(h.constantToStringUpperCaseFirstLetter)(e.febric)),r.a.createElement("td",null,e.imageUrls.length," ",r.a.createElement("i",{className:"icofont-ui-camera","aria-hidden":"true"})))})))))},N=a(5),C=a.n(N),O=(a(699),a(132)),I=a.n(O),j=a(86),w=function(e){var t,a=Object(n.useState)(!1),l=Object(s.a)(a,2),c=l[0],i=l[1],u=function(){return i(!1)},b=e.isMobile,p=e.handleClearBasket,h=e.items,v=e.handleAddressChange,g=e.addresses,N=e.handleServiceChange,O=e.selectedService,w=e.selectedAddress,S=e.handleCheckBasketPrice,x=e.isLoading;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card",ref:e.refsMap.get(j.a.basket),tabIndex:-1},r.a.createElement("div",{className:C()("header",{"p-3":b,"pt-sm-2 px-sm-4":!b})},r.a.createElement("h4",{className:"title"},"Basket ",r.a.createElement("i",{className:"icofont-basket icofont-md","aria-hidden":"true"})),0!==h.length&&r.a.createElement("p",{className:"category"},"Following items you have added to you basket")),r.a.createElement("div",{className:C()("content",{"p-2":b,"pt-sm-2 px-sm-4":!b})},0===h.length&&r.a.createElement("div",{style:{textAlign:"center"},"data-testid":"emptyBasket"},r.a.createElement("i",{className:C()("icofont-delete-alt icofont-md",{mobileEmptyBasket:b,desktopEmptyBasket:!b}),"aria-hidden":"true"})),0!==h.length&&r.a.createElement(r.a.Fragment,null,b&&r.a.createElement(y,e),!b&&r.a.createElement(k,e),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(d.a,{type:"dropDownAddNew",label:"Pickup and delivery: ",onChange:function(e){return v((t=e)?t.value:"");var t},options:g.map((function(e){return{value:e,label:e}})),defaultValue:(t=w,0!==t.length?{value:t,label:t}:null)})),r.a.createElement("br",null),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(f.a,{label:"Express",input:{name:"serviceType",value:"EXPRESS",onChange:function(e){return N(e.target.value)},checked:"EXPRESS"===O}}),r.a.createElement(f.a,{label:"Urgent",input:{name:"serviceType",value:"URGENT",onChange:function(e){return N(e.target.value)},checked:"URGENT"===O}}),r.a.createElement(f.a,{label:"Standard",input:{name:"serviceType",value:"STANDARD",onChange:function(e){return N(e.target.value)},checked:"STANDARD"===O}})),r.a.createElement("div",{className:"d-flex justify-content-end flex-wrap"},r.a.createElement(o.a,{variant:"light",className:"btn btn-wd",onClick:function(){return i(!0)}},"Empty Basket ",r.a.createElement("i",{className:"icofont-delete-alt icofont-md","aria-hidden":"true"})),r.a.createElement(o.a,{className:"btn btn-success btn-fill btn-wd float-right mt-1 ml-1",onClick:function(){w?S():E.a.warn("Select or enter address for pickup & delivery")},disabled:x},r.a.createElement(I.a,{variant:"light",show:x,id:"checkPriceButtonText"},"Check Price ",r.a.createElement("i",{className:"icofont-database icofont-md","aria-hidden":"true"})))))))),r.a.createElement(m.a,{show:c,onHide:u},r.a.createElement(m.a.Header,{closeButton:!0,translate:"yes"},r.a.createElement(m.a.Title,null,"Empty Basket")),r.a.createElement(m.a.Body,null,"Everything will be delete from basket!"),r.a.createElement(m.a.Footer,null,r.a.createElement(o.a,{variant:"primary",onClick:function(){u(),p()}},"Delete"),r.a.createElement(o.a,{variant:"secondary",onClick:u},"No"))))},S=a(15),x=a(353),T=a.n(x),A=Object(l.b)((function(e){return{items:e.basketState.items,selectedAddress:e.basketState.selectedAddress,selectedService:e.basketState.selectedService,addresses:e.loginState.user.preferences.deliveryAddress,isMobile:e.layoutState.isMobile,isLoading:T.a.isInProgress(S.a,e.aPICallsState.calls)}}),(function(e){return{deleteItem:function(t){return e(Object(c.g)(t))},editItem:function(t){return e(Object(c.f)(t))},handleCheckBasketPrice:function(){return e(Object(c.d)())},handleAddressChange:function(t){e(Object(c.b)(t)),e(Object(i.f)(t))},handleServiceChange:function(t){return e(Object(c.c)(t))},handleClearBasket:function(){return e(Object(c.e)())}}}))((function(e){return r.a.createElement(w,Object.assign({},e,{editItem:function(t){var a,n;e.editItem(t),null===(a=e.refsMap.get(j.a.itemOption))||void 0===a||null===(n=a.current)||void 0===n||n.focus()}}))})),P=a(20),F=a(27),D=a(89),B=a(41),L=a(42),M=a(3),R=a(8),_=a(151),J=a(75),U=a(141),V=a(654),z=a(61),H=a(340);var W=function(){return{type:R.b.REQUEST_ITEMS}},Y=function(e,t){var a=function(e){return Object(M.a)({FAVORITES:[]},e.categoriesWithItems)}(e);return t.forEach((function(e){return Object(H.b)(e,a)})),{type:R.b.RECEIVE_ITEMS,categoriesWithItems:a,receivedAt:Date.now()}},G=function(e){return{type:R.b.REMOVE_FAVORITE_ITEM,id:e}},K=function(e){return{type:R.b.ADD_FAVORITE_ITEM,id:e}},X=a(105),Z=a(333),q=a(140),Q=a(644),$=function(e){switch(e){case ae:return r.a.createElement(Q.Icon,{classes:"ui-love text-danger"});case"GENERAL":return r.a.createElement(Q.Icon,{classes:"users-alt-4"});case"FEMALES_REMAINING":return r.a.createElement(Q.Icon,{classes:"female"});case"OTHERS":return r.a.createElement(Q.Icon,{classes:"atom"});case"HOUSEHOLD":return r.a.createElement(Q.Icon,{classes:"ui-home"})}};function ee(e){return e===ae?"close":"ui-love"}var te=function(e){return r.a.createElement(Z.a,{className:"buttons-with-margin"},r.a.createElement(Z.a.Body,null,r.a.createElement(Z.a.Title,null,e.category," ",$(e.category)),e.items.map((function(t){return r.a.createElement(q.a,{"aria-label":"Items button group",key:t.id},r.a.createElement(o.a,{variant:"light",size:"sm",onClick:function(a){return e.handleFvtClick(t.id)}},r.a.createElement(Q.Icon,{classes:ee(e.category)})),r.a.createElement("button",{type:"button",className:"btn btn-wd btn-info",onClick:function(a){return e.handleClick(a,t.name)}},t.name),r.a.createElement(o.a,{variant:"light",hidden:!0}))}))))},ae="FAVORITES",ne=function(e){var t=e.categoriesWithItems,a=e.handleItemClick,n=e.isLoad,l=e.addFvtClick,c=e.removeFvtClick,i=[];if(t)for(var s in t)if(0!==t[s].length){var o=s===ae?c:l;i.push(r.a.createElement(te,{key:s,category:s,items:t[s],handleClick:a,handleFvtClick:o}))}return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"header pt-sm-2 px-sm-4"},r.a.createElement("h4",{id:"itms"},"Laundry Items ",r.a.createElement(Q.IconMd,{classes:"refree-jersey"}))),r.a.createElement("div",{className:"content pt-sm-2 px-sm-4"},r.a.createElement(I.a,{variant:"dark",children:i,show:n,id:"items"})))},re=a(332),le=function(e){return r.a.createElement("div",null,r.a.createElement("div",{className:"card m-1"},r.a.createElement("div",{className:"ourheader"},r.a.createElement(re.a.Toggle,{as:Z.a.Header,eventKey:e.index+""},r.a.createElement(Q.IconMd,{classes:"caret-down"})," ",e.category," ",$(e.category))),r.a.createElement(re.a.Collapse,{eventKey:e.index+""},r.a.createElement("div",{className:"card-body card-text border-none buttons-with-margin"},e.items.map((function(t){return r.a.createElement(q.a,{"aria-label":"Items button group",key:t.id},r.a.createElement(o.a,{variant:"light",size:"sm",onClick:function(a){return e.handleFvtClick(t.id)},style:{padding:0,paddingLeft:2}},r.a.createElement(Q.Icon,{classes:ee(e.category)})),r.a.createElement("button",{type:"button",className:"btn btn-wd btn-info",onClick:function(a){return e.handleClick(a,t.name)}},t.name))}))))))},ce=function(e){var t=e.categoriesWithItems,a=e.handleItemClick,n=e.isLoad,l=e.addFvtClick,c=e.removeFvtClick,i=[];if(t){var s=0;for(var o in t)if(0!==t[o].length){var m=o===ae?c:l;i.push(r.a.createElement(le,{key:o,category:o,items:t[o],index:s,handleClick:a,handleFvtClick:m})),s++}}return r.a.createElement("div",{className:"mb-5"},r.a.createElement("div",{className:"header"},r.a.createElement("h4",{id:"itms",className:"pb-2 m-0",style:{color:"#3f44ea"}},"Laundry Items ",r.a.createElement(Q.IconMd,{classes:"refree-jersey"}))),r.a.createElement("div",{className:"content"},r.a.createElement(I.a,{variant:"dark",show:n,id:"items"},r.a.createElement(re.a,{defaultActiveKey:"0"},i))))},ie=function(e){Object(B.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).handleItemClick=n.handleItemClick.bind(Object(D.a)(n)),n}return Object(F.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchItems()}},{key:"handleItemClick",value:function(e,t){e.preventDefault(),this.props.selectItemToPutInBasket(t)}},{key:"render",value:function(){var e=this.props,t=e.categoriesWithItems,a=e.isMobile,n=e.isLoading;return r.a.createElement("div",{ref:this.props.refsMap.get(j.a.items),tabIndex:-1},!a&&r.a.createElement(ne,{categoriesWithItems:t,handleItemClick:this.handleItemClick,isLoad:n,addFvtClick:this.props.addFvtItem,removeFvtClick:this.props.removeFvtItem}),a&&r.a.createElement(ce,{categoriesWithItems:t,handleItemClick:this.handleItemClick,isLoad:n,addFvtClick:this.props.addFvtItem,removeFvtClick:this.props.removeFvtItem}))}}]),a}(r.a.Component);var se,oe={fetchItems:function(){return function(e,t){e(Object(_.updateStoreSend)(S.f)),e(W()),Object(V.a)().then((function(a){return e(Y(a,t().loginState.user.preferences.favoriteItems))})).catch((function(e){return E.a.err(U.b)})).finally((function(){e(Object(_.updateStoreReceive)(S.f)),Object(J.b)()}))}},selectItemToPutInBasket:X.i,addFvtItem:function(e){return E.a.info("Added to favorite"),function(t,a){a().loginState.authenticated&&Object(z.c)(e).catch((function(e){return console.log(e)})),t(K(e))}},removeFvtItem:function(e){return E.a.info("Removed  favorite"),function(t,a){a().loginState.authenticated&&Object(z.s)(e).catch((function(e){return console.log(e)})),t(G(e))}}},me=Object(l.b)((function(e){return{categoriesWithItems:e.itemState.categoriesWithItems,isMobile:e.layoutState.isMobile,isLoading:T.a.isInProgress(S.f,e.aPICallsState.calls)}}),oe)(ie),ue=a(261),de=a(357),be=a.n(de),fe=a(676),pe=a.n(fe),Ee=a(682),he=a.n(Ee),ve=a(744),ge=a.n(ve),ye=a(31),ke=a(345);var Ne=function(e){var t=e.feedback;if(!t)return Object(ke.b)();var a=function(e){var a;return!t||(null===(a=t.reviews)||void 0===a?void 0:a.filter((function(t){return t.rating===e})).length)<1};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ce,{value:5,percentage:t.star5,disabled:a(5)}),r.a.createElement(Ce,{value:4,percentage:t.star4,disabled:a(4)}),r.a.createElement(Ce,{value:3,percentage:t.star3,disabled:a(3)}),r.a.createElement(Ce,{value:2,percentage:t.star2,disabled:a(2)}),r.a.createElement(Ce,{value:1,percentage:t.star1,disabled:a(1)}))},Ce=function(e){var t=e.value,a=e.percentage,n=e.disabled;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement("button",{className:"px-2 btn-link link",onClick:function(){return we(t)},disabled:n},t," star"),r.a.createElement("div",{className:"px-2 flex-grow-1 align-self-center"},r.a.createElement(ue.a,{variant:"warning",now:a})),r.a.createElement("div",{className:"px-2"},r.a.createElement("button",{className:"px-2 btn-link link",onClick:function(){return we(t)},disabled:n},r.a.createElement(Oe,{val:a}),"%"))))},Oe=function(e){var t=e.val;return t<10?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,null),r.a.createElement(Ie,null),t):t>=10&&t<=99?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ie,null),t):r.a.createElement(r.a.Fragment,null,t)},Ie=function(){return r.a.createElement("span",{style:{display:"inline-block",width:".385em"}})},je=[{dataField:"id",text:"Customers' reviews",formatter:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex flex-column py-2"},r.a.createElement("div",{className:"font-weight-bolder"},t.name),r.a.createElement("div",{className:"text-muted font-weight-lighter pb-2"},t.date),r.a.createElement(be.a,{input:{value:t.rating},isEdit:!1,size:18}),t.comment))},headerAttrs:{hidden:!0}},{dataField:"rating",text:"Rating",filter:Object(ve.numberFilter)({getFilter:function(e){se=e}}),headerAttrs:{hidden:!0},style:{display:"none"}}],we=function(e){se({number:e,comparator:"="})},Se={sizePerPage:5,hideSizePerPage:!0,hidePageListOnlyOnePage:!0},xe=function(e){var t=e.laundryId,a=e.rating,l=void 0===a?0:a,c=e.laundryName,i=void 0===c?"Laundry":c,u=Object(n.useState)(),d=Object(s.a)(u,2),b=d[0],f=d[1],p=Object(n.useState)(!1),E=Object(s.a)(p,2),h=E[0],v=E[1];Object(n.useEffect)((function(){h&&Object(V.c)(t).then((function(e){var t=e.db,a=e.api;return t&&f(t),a})).then((function(e){return f(e)})).catch(ye.notifyErr)}),[h,t]);var g=function(){v(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){v(!0)},className:"btn-link link"},r.a.createElement("div",{className:"d-flex flex-row"},r.a.createElement(be.a,{input:{value:l},isEdit:!1,size:20,className:"transparent"}),r.a.createElement("div",{className:"p-1 align-self-center"},l.toFixed(1)," out of 5"))),r.a.createElement(m.a,{show:h,onHide:g,scrollable:!0,size:"lg"},r.a.createElement(m.a.Header,{style:{display:"block",border:0}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12 col-sm-3 col-lg-6"},r.a.createElement("h3",null,i)),r.a.createElement("div",{className:"col-12 col-sm-9 col-lg-6 px-2"},r.a.createElement(Ne,{feedback:b})))),r.a.createElement(m.a.Body,null,!b&&Object(ke.b)(),b&&r.a.createElement(pe.a,{keyField:"comment",data:null===b||void 0===b?void 0:b.reviews,columns:je,pagination:he()(Se),filter:ge()()})),r.a.createElement(m.a.Footer,null,r.a.createElement(o.a,{variant:"secondary",onClick:g}," ",r.a.createElement(Q.Icon,{classes:"close"})," Close "))))},Te=a(669),Ae=a.n(Te),Pe=function(e){var t=e.summary,a=e.handleDetailClick,l=e.handleFvtLaundry,c=e.handlePostJob,i=Object(n.useState)(!1),u=Object(s.a)(i,2),d=u[0],b=u[1],f=function(){return b(!0)},p=t.id,E=t.name,v=t.estimatedPrice,g=t.estimatedTime,y=t.deliveryCharges,k=t.notMatchReasons,N=t.warningReasons,C=t.rating,O=t.isFvtLaundry;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,null,r.a.createElement(Z.a.Header,null,r.a.createElement(Z.a.Title,null,r.a.createElement(Ae.a,{imgSize:"20x20",text:Object(h.initialCharacters)(E),hashTheme:!0,circle:!0})," ",r.a.createElement("strong",null,E)," ",O&&r.a.createElement(Q.Icon,{classes:"ui-love text-danger"}),!O&&r.a.createElement(o.a,{variant:"light",size:"sm",className:"float-right",onClick:function(e){return l(p)}},"Add favorite ",r.a.createElement(Q.IconMd,{classes:"ui-love-add"}))),C>0&&r.a.createElement(xe,{laundryName:E,laundryId:p,rating:C})),r.a.createElement("div",{className:"content pt-sm-2 px-sm-4"},g&&r.a.createElement("p",null,"Time: ",g),y&&r.a.createElement("p",null,"Delivery: ",y),v>0&&r.a.createElement("p",null,"Total: ",v),N&&N.length>0?r.a.createElement("div",null,r.a.createElement("span",{className:"text-warning"},"Some prices are missing")," ",r.a.createElement("button",{className:"btn btn-xs",onClick:function(e){return f()}},"Details")):k&&k.length>0?r.a.createElement("div",null,r.a.createElement("span",{className:"text-danger"},"Some services may not be provided")," ",r.a.createElement("button",{className:"btn btn-xs",onClick:function(e){return f()}},"Details")):"",r.a.createElement("div",{className:"d-flex justify-content-end flex-wrap"},r.a.createElement(o.a,{className:"float-right",onClick:function(){return a(p)}},"Price Details"," ",r.a.createElement(Q.IconMd,{classes:"database"})),r.a.createElement(o.a,{className:"btn btn-success btn-fill float-right ml-1",onClick:function(){return c(p)}},"Assign Job"," ",r.a.createElement(Q.IconMd,{classes:"share-alt"}))))),r.a.createElement(m.a,{show:d,onHide:function(){return b(!1)},dialogClassName:"modal-dialog modal-dialog-scrollable","aria-labelledby":"contained-modal-title-vcenter",size:"lg",centered:!0},r.a.createElement(m.a.Header,{closeButton:!0,translate:"yes"},"Possible problems details"),r.a.createElement(m.a.Body,{style:{backgroundColor:"white"}},r.a.createElement("ul",{className:"text-danger"},k&&k.map((function(e){return r.a.createElement("li",{key:e},e)}))),r.a.createElement("ul",{className:"text-warning"},N&&N.map((function(e){return r.a.createElement("li",{key:e},e)}))),r.a.createElement("b",null,"Don't worry too much about these message(s). Your zebo can contact you for details on your requirements."))))},Fe=function(e){var t=e.summary,a=e.handlePostJob,l=e.refsMap,c=e.handleFvtLaundry,i=t.id,s=t.name,m=t.estimatedPrice,u=t.estimatedTime,d=t.deliveryCharges,b=t.displayItemPriceBreakDown,f=t.rating,p=t.isFvtLaundry;return Object(n.useEffect)((function(){var e,t;null===(e=l.get(j.a.laundryDetail))||void 0===e||null===(t=e.current)||void 0===t||t.focus()})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card",ref:l.get(j.a.laundryDetail),tabIndex:-1},r.a.createElement("div",{className:"header pt-sm-2 px-sm-4"},r.a.createElement("h4",{id:"ld"},r.a.createElement("span",{className:"pr-2"},r.a.createElement(Ae.a,{imgSize:"20x20",text:Object(h.initialCharacters)(s),hashTheme:!0,circle:!0})),s," ",p&&r.a.createElement(Q.Icon,{classes:"ui-love text-danger"}),!p&&r.a.createElement(o.a,{variant:"light",size:"sm",className:"float-right",onClick:function(e){return c(i)}},"Add favorite ",r.a.createElement(Q.IconMd,{classes:"ui-love-add"})))),r.a.createElement("div",{className:"px-sm-3"},f>0&&r.a.createElement(xe,{laundryName:s,laundryId:i,rating:f})),r.a.createElement("div",{className:"content pt-sm-2 px-sm-4"},u&&r.a.createElement("p",{className:"text-info"},"Time: ",u),b&&r.a.createElement("div",{className:"content table-responsive table-full-width"},r.a.createElement("table",{className:"table table-hover table-striped"},r.a.createElement("tbody",null,b.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",{className:"text-right"},e))}))))),r.a.createElement("div",{className:"text-right"},d&&r.a.createElement("p",null,"Delivery: ",d),m&&r.a.createElement("p",null,"Total: ",m)),r.a.createElement("div",{className:"d-flex justify-content-end flex-wrap"},r.a.createElement("button",{className:"btn btn-success btn-fill ml-1",onClick:function(){return a(i)}},r.a.createElement("span",{className:"pr-2"},"Assign Job"),r.a.createElement("i",{className:"icofont-share-alt icofont-md","aria-hidden":"true"}))))))},De=function(e){var t=e.summaries,a=e.isMobile,n=e.handleCancelJob,l=e.displayDetail,c=e.handleDetailClick,i=e.clickedLaundryId,s=e.handlePostJob,o=e.addFvtLaundryAndUpdateStore,m=e.refsMap,u=function(e){var t,a;c(e),null===(t=m.get(j.a.laundryDetail))||void 0===t||null===(a=t.current)||void 0===a||a.focus()},d=l?t.filter((function(e){return e.id!==i})):t;return r.a.createElement("div",null,!1,r.a.createElement("div",{className:"row"},l&&r.a.createElement("div",{className:"col-md-6"},r.a.createElement(Fe,{handlePostJob:s,refsMap:m,handleFvtLaundry:o,summary:t.filter((function(e){return e.id===i}))[0]})),r.a.createElement("div",{className:"col-md-6"},r.a.createElement("div",{className:"card",ref:m.get(j.a.laundrySummaries),tabIndex:-1},r.a.createElement("div",{className:"header pt-sm-2 px-sm-4"},r.a.createElement("h4",{"data-testid":"psHeading"},r.a.createElement("span",{className:"pr-2"},"Laundries"),r.a.createElement("i",{className:"icofont-users","aria-hidden":"true"}))),r.a.createElement("div",{className:"content pt-sm-2 px-sm-4"},!t&&r.a.createElement("p",null,"No Laundry Found in your Area"),t&&r.a.createElement("div",null,!a&&r.a.createElement("button",{className:"btn btn-wd",onClick:function(){return n()}},r.a.createElement("span",{className:"pr-2"},"Basket"),r.a.createElement("i",{className:"icofont-basket icofont-md","aria-hidden":"true"})),r.a.createElement("p",null,"Laundries found in your area."),d.map((function(e){return r.a.createElement(Pe,{key:e.id,summary:e,handlePostJob:s,handleDetailClick:u,handleFvtLaundry:o})})),r.a.createElement("p",{className:"text-muted"},"*Price/time are estimates based on price list, but can be changed.")))))))},Be=a(659),Le=a(94),Me=a(670);var Re=function(e){Object(B.a)(a,e);var t=Object(L.a)(a);function a(){return Object(P.a)(this,a),t.apply(this,arguments)}return Object(F.a)(a,[{key:"render",value:function(){return r.a.createElement(De,Object.assign({clickedLaundryId:this.props.laundryId},this.props,{handleDetailClick:this.props.updateGlobalStateOnDetailClick}))}}]),a}(r.a.Component),_e=Object(l.b)((function(e){return{summaries:(t=e.priceSummaryState.laundryPriceSummaries,a=e.loginState.user.preferences.favoriteLaundries,t.map((function(e){var t=Object(v.exist)(a,e.id);return Object(M.a)(Object(M.a)({},e),{},{isFvtLaundry:t})}))),displayDetail:e.jobPageState.showPriceDetail,laundryId:e.priceSummaryState.showDetailLaundryId,isMobile:e.layoutState.isMobile};var t,a}),(function(e){return Object(Le.b)({handleCancelJob:function(){return Object(Be.a)()},updateGlobalStateOnDetailClick:function(e){return Object(Be.c)(e)},handlePostJob:function(e){return Object(Be.b)(e)},addFvtLaundryAndUpdateStore:Me.a},e)}))(Re),Je=a(691),Ue=a.n(Je),Ve=a(355),ze=a.n(Ve),He=a(356),We=a.n(He),Ye=a(647),Ge=a.n(Ye),Ke=a(214),Xe=function(e){Object(B.a)(a,e);var t=Object(L.a)(a);function a(e){var n;return Object(P.a)(this,a),(n=t.call(this,e)).state={displayTimepicker:!1,code:""},n.getValue=n.getValue.bind(Object(D.a)(n)),n.changeTimeState=n.changeTimeState.bind(Object(D.a)(n)),n.validateAndHandlePostJob=n.validateAndHandlePostJob.bind(Object(D.a)(n)),n}return Object(F.a)(a,[{key:"toggleTimekeeper",value:function(e){var t=!this.state.displayTimepicker;this.setState({displayTimepicker:t,code:e})}},{key:"getValue",value:function(){switch(this.state.code){case"pa":return this.props.pickupAfter;case"pb":return this.props.pickupBefore;case"da":return this.props.deliverAfter;case"db":return this.props.deliverBefore;default:return""}}},{key:"changeTimeState",value:function(e){switch(this.state.code){case"pa":return this.props.pickupAfterTimeChange(e);case"pb":return this.props.pickupBeforeTimeChange(e);case"da":return this.props.deliverAfterTimeChange(e);case"db":return this.props.deliverBeforeTimeChange(e);default:return}}},{key:"validateAndHandlePostJob",value:function(){var e=Object(Ke.b)(this.props.email);this.props.contactNumber?e?E.a.warn(e+" "+this.props.email):this.props.handlePostJob():E.a.warn("Select or enter contact number")}},{key:"render",value:function(){var e,t=this,a=this.props,r=a.pickupAfter,l=a.pickupBefore,c=a.deliverAfter,i=a.deliverBefore,s=a.handleCancelJob,m=a.laundryItems,u=a.selectedService,b=a.posting,p=a.selectedAddress,E=a.contactNumber,h=a.contactNumberChange,v=a.deliverNote,g=a.deliverNoteChange,y=a.pickupNote,k=a.pickupNoteChange,N=a.contacts,C=a.email,O=a.isLoading;return n.createElement("div",{className:"card"},n.createElement("div",{className:"content pt-sm-2 px-sm-4"},n.createElement("div",{className:"row"},!!this.state.displayTimepicker&&n.createElement("div",{className:"col-md-6"},n.createElement(Ue.a,{time:this.getValue(),onChange:this.changeTimeState,onDoneClick:function(){t.toggleTimekeeper("")},switchToMinuteOnHourSelect:!0})),n.createElement("div",{className:"col-md-6"},n.createElement("div",{style:{marginBottom:20}},n.createElement("h4",{className:"title"},"Contact Number"," ",n.createElement(Ge.a,null,"We will share this number to zebo, if something confusing zebo can contact you on this")),n.createElement(d.a,{type:"dropDownAddNew",label:"Phone number: ",isClearable:"true",options:N.map((function(e){return{value:e,label:e}})),onChange:function(e){return h((t=e)?t.value:"");var t},defaultValue:(e=E,0!==e.length?{value:e,label:e}:null),onlyNumbers:!0})),n.createElement("div",{style:{marginBottom:20}},n.createElement("h4",{className:"title"},"Email "," ",n.createElement(Ge.a,null,"We will use this to update you about your job status e-g we will send you email once your job is complete")),n.createElement(ze.a,{type:"email",name:"email",placeholder:"Email",meta:{},defaultValue:C,onChange:function(e){return t.props.updateEmailJob(e.target.value)}})),n.createElement("div",{style:{marginBottom:20}},n.createElement("h4",{className:"title"},"Preferred pick up "," ",n.createElement(Ge.a,null,"Zebo will come to pick up clothes between these time. You can mention any notes as well e-g pickup from front door")),n.createElement("div",{className:"btn-group",style:{marginBottom:5}},n.createElement("button",{type:"button","data-testid":"pickupAfter",className:"btn btn-default",onClick:function(){return t.toggleTimekeeper("pa")}},"After ",r),n.createElement("button",{type:"button","data-testid":"pickupBefore",className:"btn btn-default",onClick:function(){return t.toggleTimekeeper("pb")}},"Before ",l)),n.createElement(ze.a,{type:"text",placeholder:"pick up notes",meta:{},input:{value:y,onChange:function(e){return k(e.target.value)}}})),n.createElement("div",{style:{marginBottom:20}},n.createElement("h4",{className:"title"},"Preferred Delivery "," ",n.createElement(Ge.a,null,"Zebo will come to deliver clothes between these time. You should be at home this time. You can also mention any notes as well e-g door ball is not working")),n.createElement("div",{className:"btn-group",style:{marginBottom:5}},n.createElement("button",{type:"button","data-testid":"deliverAfter",className:"btn btn-default",onClick:function(){return t.toggleTimekeeper("da")}},"After ",c),n.createElement("button",{type:"button","data-testid":"deliverBefore",className:"btn btn-default",onClick:function(){return t.toggleTimekeeper("db")}},"Before ",i)),n.createElement(ze.a,{type:"text",placeholder:"delivery notes",meta:{},input:{value:v,onChange:function(e){return g(e.target.value)}}})),n.createElement("div",{className:"row float-right"},n.createElement("div",{className:"col-md-12 input-group"},n.createElement(o.a,{variant:"light",className:"btn btn-wd",onClick:function(){return s()}},"Cancel ",n.createElement("i",{className:"icofont-close icofont-md","aria-hidden":"true"})),n.createElement(o.a,{className:"btn btn-success btn-fill btn-wd ml-1",onClick:function(){return t.validateAndHandlePostJob()},disabled:O},n.createElement(I.a,{variant:"light",show:O,id:"postJobButtonText"},"POST ",n.createElement("i",{className:"icofont-paper-plane icofont-md","aria-hidden":"true"})))))),!this.state.displayTimepicker&&n.createElement("div",{className:"col-md-6"},n.createElement("h4",null,"Your are about to laundry"),n.createElement(f.a,{disabled:!0,"data-testid":"checkbtn",input:{checked:!0},label:"Posting ".concat(b)}),n.createElement("br",null),n.createElement(f.a,{disabled:!0,input:{checked:!0},label:"To & From ".concat(p)}),n.createElement("br",null),n.createElement(f.a,{disabled:!0,input:{checked:!0},label:"".concat(u," Service")}),n.createElement("br",null),m.map((function(e){return"".concat(e.count," x ").concat(e.name," (").concat(e.operations,")")})).map((function(e,t){return n.createElement("div",{key:t},n.createElement(We.a,{disabled:!0,input:{checked:!0},label:e}))}))))))}}]),a}(n.Component),Ze=a(262),qe=function(){return function(e,t){e(Object(_.updateStoreSend)(S.i));var a=Object(Ze.b)(t());return Object(z.w)(a).then((function(t){var a;e((a=t,{type:R.d.RECEIVE_POST_JOB,newVal:a})),E.a.sucs(t.message)})).catch(ye.notifyErr).finally((function(){e(Object(_.updateStoreReceive)(S.i)),Object(J.b)()}))}},Qe=a(77),$e=Object(l.b)((function(e){return{pickupAfter:Object(Qe.g)(e),pickupBefore:Object(Qe.h)(e),deliverAfter:Object(Qe.e)(e),deliverBefore:Object(Qe.f)(e),laundryItems:e.basketState.items,selectedService:e.basketState.selectedService,selectedAddress:e.basketState.selectedAddress,posting:0===e.basketState.selectedLaundryId?"To all laundries in your area":e.priceSummaryState.laundryPriceSummaries.filter((function(t){return t.id===e.basketState.selectedLaundryId}))[0].name,contactNumber:e.basketState.contactNumber,deliverNote:e.basketState.deliverNote,pickupNote:e.basketState.pickupNote,contacts:e.loginState.user.preferences.contactNumbers,email:e.basketState.emailCorrespondence,isLoading:T.a.isInProgress(S.i,e.aPICallsState.calls)}}),(function(e){return{pickupAfterTimeChange:function(t){return e(function(e){return{type:R.d.UPDATE_PICKUP_AFTER,newTime:e}}(t.formatted12))},pickupBeforeTimeChange:function(t){return e(function(e){return{type:R.d.UPDATE_PICKUP_BEFORE,newTime:e}}(t.formatted12))},deliverAfterTimeChange:function(t){return e(function(e){return{type:R.d.UPDATE_DELIVER_AFTER,newTime:e}}(t.formatted12))},deliverBeforeTimeChange:function(t){return e(function(e){return{type:R.d.UPDATE_DELIVER_BEFORE,newTime:e}}(t.formatted12))},handleCancelJob:function(){return e(Object(Be.a)())},handlePostJob:function(){return e(qe())},contactNumberChange:function(t){var a;e((a=t,{type:R.d.UPDATE_CONTACT_NUMBER,newVal:a})),e(Object(i.g)(t))},deliverNoteChange:function(t){return e((a=t,{type:R.d.UPDATE_DELIVER_NOTE,newVal:a}));var a},pickupNoteChange:function(t){return e((a=t,{type:R.d.UPDATE_PICKUP_NOTE,newVal:a}));var a},updateEmailJob:function(t){return e((a=t,{type:R.d.UPDATE_EMAIL_JOB,newVal:a}));var a}}}))(Xe);t.default=Object(l.b)((function(e){return{showAllItems:e.jobPageState.showAllItems,showBasket:e.jobPageState.showBasket,showAddItem:e.jobPageState.showAddItem,showPriceSummaries:e.jobPageState.showPriceSummaries,showPostJob:e.jobPageState.showPostJob}}))((function(e){var t=e.showAllItems,a=e.showBasket,n=e.showAddItem,l=e.showPriceSummaries,c=e.showPostJob,i=e.refsMap;return r.a.createElement("div",null,r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row pt-2"},r.a.createElement("div",{className:"col-md-6"},a&&r.a.createElement(A,{refsMap:i})),r.a.createElement("div",{className:"col-md-6"},t&&r.a.createElement(me,{refsMap:i}),n&&r.a.createElement(g.b,{refsMap:i}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},l&&r.a.createElement(_e,{refsMap:i}))),c&&r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement($e,null))))))}))}}]);